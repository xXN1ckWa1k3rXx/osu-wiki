---
outdated: true
---

# Частые проблемы при работе с osu! wiki

## Ничего не значащие описания коммитов

Под этим обычно понимают коммиты с описанием вроде `Update ru.md`, которое по умолчанию создаёт веб-интерфейс GitHub. Такое описание неинформативно и поэтому имеет малую ценность.

**Хорошее описание позволяет понять суть изменений, не заглядывая внутрь коммита.** Оно может быть как кратким, так и длинным, но не больше 72 символов: остаток будет скрыт в веб-интерфейсе. Если вы чувствуете, что одного предложения недостаточно, и при этом редактируете несколько файлов, имеет смысл разбить правку на несколько коммитов (по одному на каждый файл, например).

---

Как исправить описание (инструкция для веб-интерфейса GitHub; в GitHub Desktop так поступить нельзя):

1. Откройте свой форк `osu-wiki`.
2. Создайте новую ветку с таким же по смыслу названием, как у ветки с непонятными коммитами (например, `update-translation-2`).
3. Создайте пулл-реквест **в своём форке.**
4. Если вы не видите полей `base fork` и `head fork`, нажмите на ссылку `compare across forks`.
5. Выберите свой форк в поле `head fork`.
6. Выберите проблемную ветку в поле `compare`.
7. Выберите свой форк в поле `base fork`.
8. Выберите только что созданную ветку в поле `base`.
9. Нажмите на кнопку `Create pull request`.
10. Не заполняя название и описание, снова нажмите на кнопку `Create pull request`.
11. Внизу страницы, около кнопки `Merge pull request`, нажмите на стрелку вниз.
12. Выберите пункт `Squash and merge`.
13. Нажмите на кнопку `Squash and merge`.
14. Придумайте краткое описание всех своих изменений в ветке — оно станет описанием коммита.
15. По желанию заполните подробное описание.
16. Нажмите на кнопку `Confirm squash and merge`.
17. Откройте репозиторий [`ppy/osu-wiki`](https://github.com/ppy/osu-wiki).
18. Закройте свой прошлый пулл-реквест, где было много неинформативных коммитов.
19. Создайте пулл-реквест на основе новой ветки.
20. Описание для пулл-реквеста можно скопировать с только что закрытого (на него можно вставить ссылку).
21. Нажмите на кнопку `Create pull request`. Если все прошлые замечания вами уже исправлены, попросите о том, чтобы новый пулл-реквест влили.

## Отстающая ветка `master`

Делая форк `osu-wiki`, вы получаете копию репозитория на тот момент. Когда в оригинальном репозитории появляются новые изменения, они не попадают в форк — GitHub не предоставляет таких возможностей.

---

Тем не менее, обновить ветку всё-таки можно — либо вручную, либо с помощью сторонних сервисов, например, [Upriver](https://upriver.github.io/), о котором и пойдёт речь.

1. Откройте [Upriver](https://upriver.github.io/).
2. При первом посещении нажмите на ссылку `Sign in with GitHub`.
3. Нажмите на кнопку `Authorize upriver`.
4. Заполните поля:
   - into: *ваш форк `osu-wiki`;*
   - branch: `master`;
   - from: `ppy/osu-wiki`;
   - branch: `master`;
   - force?: да.
5. Нажмите на кнопку `Pull`.
6. Нажмите на кнопку `Close`.
7. Закройте Upriver.

После этого ветка `master` в вашем форке будет наравне с `ppy:master`, и от неё можно будет отводить новые ветки с изменениями, не боясь конфликтов.

## Конфликты в пулл-реквесте

Конфликт изменений может произойти в двух случаях:

- Вы изменили файл в отставшей ветке, а в основном репозитории кто-то изменил этот же файл, но по-другому;
- Помимо вас, правкой статьи занимался другой человек, и его изменения были влиты раньше ваших.

В зависимости от сложности конфликтов, есть два решения.

1. Если в вашем пулл-реквесте есть кнопка `Resolve conflicts`, нажмите на неё, чтобы открыть редактор.
   1. Найдите один из конфликтов (GitHub их подсвечивает).
   2. Всё, что находится между маркерами `<<<<<<<` и `=======`, — ваши изменения; всё, что между `=======` и `>>>>>>> master`, — текущая версия статьи в `ppy/master`.
   3. Разрешите конфликт. Чтобы оставить вашу версию изменений, удалите правку, сделанную другим человеком; чтобы отказаться от ваших изменений, удалите их. В обоих случаях удалите маркеры `<<<<<<<`, `=======` и `>>>>>>> master`.
   4. Разрешите оставшиеся конфликты.
   5. Когда все конфликты будут решены, активируется кнопка `Mark as resolved` — нажмите на неё.
2. Если кнопка `Resolve conflicts` неактивна, вам придётся [обновить свою ветку](#отстающая-ветка-master), **сбросив все изменения,** и внести их заново.
   - *Примечание: так стоит поступать, если вы пользуетесь только веб-интерфейсом GitHub. Решить конфликт возможно с помощью более сложных инструментов, но их описание выходит за рамки данной статьи.*
